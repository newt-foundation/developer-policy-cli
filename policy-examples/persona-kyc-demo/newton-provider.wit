package newton:provider@0.1.0;

interface http {
    record http-request {
        url: string,
        method: string,
        headers: list<tuple<string, string>>,
        body: option<list<u8>>,
    }

    record http-response {
        status: u16,
        headers: list<tuple<string, string>>,
        body: list<u8>,
    }

    fetch: func(request: http-request) -> result<http-response, string>;
}

interface secrets {
    get: func(secret-id: string) -> result<string, string>;
}

world newton-provider {
    import http;
    import secrets;
    export run: func(input: string) -> result<string, string>;
}
